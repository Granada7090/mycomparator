{% extends 'base.html' %}
{% load static %}

{% block content %}
<!-- Hero Section with Search -->
<section class="hero-section bg-primary text-white py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10 text-center">
                <h1 class="display-4 fw-bold mb-4">Encuentra los mejores precios</h1>
                <p class="lead mb-5">Compara precios de vuelos y hoteles en un solo lugar</p>
                
                <!-- Search Tabs -->
                <div class="search-tabs mb-4">
                    <ul class="nav nav-pills justify-content-center" id="searchTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="vuelos-tab" data-bs-toggle="pill" data-bs-target="#vuelos" type="button" role="tab">
                                <i class="fas fa-plane me-2"></i>Vuelos
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="hoteles-tab" data-bs-toggle="pill" data-bs-target="#hoteles" type="button" role="tab">
                                <i class="fas fa-hotel me-2"></i>Hoteles
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="paquetes-tab" data-bs-toggle="pill" data-bs-target="#paquetes" type="button" role="tab">
                                <i class="fas fa-suitcase me-2"></i>Vuelo + Hotel
                            </button>
                        </li>
                    </ul>
                </div>

                <!-- Search Forms -->
                <div class="tab-content" id="searchTabsContent">
                    <!-- Vuelos Form -->
                    <div class="tab-pane fade show active" id="vuelos" role="tabpanel">
                        <form method="post" action="{% url 'buscar_paquete' %}" class="search-form">
                            {% csrf_token %}
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label">Origen</label>
                                    <input type="text" class="form-control" name="origen" placeholder="Ciudad o aeropuerto" required>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Destino</label>
                                    <input type="text" class="form-control" name="destino" placeholder="Ciudad o aeropuerto" required>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Ida</label>
                                    <input type="date" class="form-control" name="fecha_ida" required>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Vuelta</label>
                                    <input type="date" class="form-control" name="fecha_vuelta">
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Pasajeros</label>
                                    <select class="form-select" name="pasajeros">
                                        <option value="1">1 pasajero</option>
                                        <option value="2">2 pasajeros</option>
                                        <option value="3">3 pasajeros</option>
                                        <option value="4">4 pasajeros</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Clase</label>
                                    <select class="form-select" name="clase">
                                        <option value="economy">Economy</option>
                                        <option value="premium">Premium Economy</option>
                                        <option value="business">Business</option>
                                        <option value="first">First Class</option>
                                    </select>
                                </div>
                                <div class="col-12 text-center">
                                    <button type="submit" class="btn btn-warning btn-lg px-5">
                                        <i class="fas fa-search me-2"></i>Buscar Vuelos
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>

                    <!-- Hoteles Form -->
                    <div class="tab-pane fade" id="hoteles" role="tabpanel">
                        <form method="post" action="{% url 'buscar_paquete' %}" class="search-form">
                            {% csrf_token %}
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label">Origen</label>
                                    <input type="text" class="form-control" name="origen" placeholder="Ciudad de origen" required>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Destino</label>
                                    <input type="text" class="form-control" name="destino" placeholder="Ciudad, hotel o lugar" required>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Check-in</label>
                                    <input type="date" class="form-control" name="check_in" required>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Check-out</label>
                                    <input type="date" class="form-control" name="check_out" required>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Huéspedes</label>
                                    <select class="form-select" name="huespedes">
                                        <option value="1">1 huésped</option>
                                        <option value="2">2 huéspedes</option>
                                        <option value="3">3 huéspedes</option>
                                        <option value="4">4 huéspedes</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Habitaciones</label>
                                    <select class="form-select" name="habitaciones">
                                        <option value="1">1 habitación</option>
                                        <option value="2">2 habitaciones</option>
                                        <option value="3">3 habitaciones</option>
                                    </select>
                                </div>
                                <div class="col-12 text-center">
                                    <button type="submit" class="btn btn-warning btn-lg px-5">
                                        <i class="fas fa-search me-2"></i>Buscar Hoteles
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>

                    <!-- Paquetes Form -->
                    <div class="tab-pane fade" id="paquetes" role="tabpanel">
                        <form method="post" action="{% url 'buscar_paquete' %}" class="search-form">
                            {% csrf_token %}
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label">Origen</label>
                                    <input type="text" class="form-control" name="origen" placeholder="Ciudad o aeropuerto" required>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Destino</label>
                                    <input type="text" class="form-control" name="destino" placeholder="Ciudad o aeropuerto" required>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Ida</label>
                                    <input type="date" class="form-control" name="fecha_ida" required>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Vuelta</label>
                                    <input type="date" class="form-control" name="fecha_vuelta">
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Check-in</label>
                                    <input type="date" class="form-control" name="check_in" required>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Check-out</label>
                                    <input type="date" class="form-control" name="check_out" required>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Pasajeros</label>
                                    <select class="form-select" name="pasajeros">
                                        <option value="1">1 pasajero</option>
                                        <option value="2">2 pasajeros</option>
                                        <option value="3">3 pasajeros</option>
                                    </select>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Habitaciones</label>
                                    <select class="form-select" name="habitaciones">
                                        <option value="1">1 habitación</option>
                                        <option value="2">2 habitaciones</option>
                                    </select>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">&nbsp;</label>
                                    <button type="submit" class="btn btn-warning btn-lg w-100">
                                        <i class="fas fa-search me-2"></i>Buscar Paquete
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="features-section py-5">
    <div class="container">
        <div class="row text-center">
            <div class="col-md-4 mb-4">
                <div class="feature-item">
                    <i class="fas fa-percentage fa-3x text-primary mb-3"></i>
                    <h4>Mejores Precios</h4>
                    <p>Compara precios entre múltiples proveedores para encontrar la mejor oferta</p>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="feature-item">
                    <i class="fas fa-shield-alt fa-3x text-primary mb-3"></i>
                    <h4>Reservas Seguras</h4>
                    <p>Todas tus reservas están protegidas con los más altos estándares de seguridad</p>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="feature-item">
                    <i class="fas fa-headset fa-3x text-primary mb-3"></i>
                    <h4>Atención 24/7</h4>
                    <p>Soporte disponible las 24 horas para ayudarte con cualquier necesidad</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Popular Destinations -->
<section class="destinations-section bg-light py-5">
    <div class="container">
        <h2 class="text-center mb-5">Destinos Populares</h2>
        <div class="row">
            <div class="col-md-3 mb-4">
                <div class="destination-card">
                    <img src="https://images.unsplash.com/photo-1543785734-4b6e564642f8?w=400&h=300&fit=crop" class="img-fluid rounded" alt="Madrid">
                    <div class="destination-info">
                        <h5>Madrid</h5>
                        <p>Desde €150</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="destination-card">
                    <img src="https://images.unsplash.com/photo-1583422409516-2895a77efded?w=400&h=300&fit=crop" class="img-fluid rounded" alt="Barcelona">
                    <div class="destination-info">
                        <h5>Barcelona</h5>
                        <p>Desde €120</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="destination-card">
                    <img src="https://images.unsplash.com/photo-1596484552834-6a58f850e0a1?w=400&h=300&fit=crop" class="img-fluid rounded" alt="Paris">
                    <div class="destination-info">
                        <h5>Paris</h5>
                        <p>Desde €200</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="destination-card">
                    <img src="https://images.unsplash.com/photo-1513635269975-59663e0ac1ad?w=400&h=300&fit=crop" class="img-fluid rounded" alt="London">
                    <div class="destination-info">
                        <h5>London</h5>
                        <p>Desde €180</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
$(document).ready(function() {
    // Set minimum dates for date inputs
    const today = new Date().toISOString().split('T')[0];
    $('input[type="date"]').attr('min', today);
    
    // Auto-switch tabs based on URL
    const urlParams = new URLSearchParams(window.location.search);
    const tab = urlParams.get('tab');
    if (tab) {
        $(`#${tab}-tab`).tab('show');
    }
    
    // Auto-focus on first input when tab changes
    $('#searchTabs button').on('click', function() {
        const target = $(this).data('bsTarget');
        setTimeout(function() {
            $(target + ' input[type="text"]').first().focus();
        }, 100);
    });
});
</script>
{% endblock %}
